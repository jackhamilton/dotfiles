# If you come from bash you might have to change your $PATH.
export PATH=$HOME/bin:/usr/local/bin:$PATH
export PATH="/opt/homebrew/bin:$PATH"

# Path to your oh-my-zsh installation.
# export ZSH="$HOME/.oh-my-zsh"
#
# # Set name of the theme to load --- if set to "random", it will
# # load a random theme each time oh-my-zsh is loaded, in which case,
# # to know which specific one was loaded, run: echo $RANDOM_THEME
# # See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes
# ZSH_THEME="agnoster"
#
# ENABLE_CORRECTION="true"
#
# Set list of themes to pick from when loading at random
[[ ! -d "$HOME/.antigen" ]] && git clone https://github.com/zsh-users/antigen.git "$HOME/.antigen"
source "$HOME/.antigen/antigen.zsh"

# Set the default plugin repo to be zsh-utils
antigen use belak/zsh-utils --branch=main

# Specify completions we want before the completion module
antigen bundle zsh-users/zsh-completions

# Specify plugins we want
plugins=()
antigen bundle editor@main
antigen bundle history@main
antigen bundle prompt@main
antigen bundle utility@main
antigen bundle completion@main
antigen bundle akash329d/zsh-alias-finder
antigen bundle Junker/zsh-archlinux@main
antigen bundle desyncr/auto-ls
antigen bundle zpm-zsh/undollar
antigen bundle jeffreytse/zsh-vi-mode
antigen bundle zsh-users/zsh-autosuggestions

lsdloc=$(which lsd)
AUTO_LS_COMMANDS=(git-status $lsdloc)

# Specify additional external plugins we want
antigen bundle zsh-users/zsh-syntax-highlighting

# Load everything
antigen apply

# source $ZSH/oh-my-zsh.sh

prompt_context(){}

export EDITOR='nvim'

alias cd=z
alias cat="bat -P"
alias curl=curlie
alias pacin="sudo pacman -S"
alias ls=lsd
alias find=fd
alias gcc="sccache gcc"
alias cmake="cmake -DCMAKE_C_COMPILER_LAUNCHER=sccache -DCMAKE_CXX_COMPILER_LAUNCHER=sccache"
alias vdiff="nvim -d"
alias cedit="chezmoi edit"
alias capply="chezmoi apply"
alias cp="xcp"
gitup ()
{
    git add .
    git commit -m "$2"
    git push
}

eval "$(zoxide init zsh)"
eval "$(direnv hook zsh)"
eval "$(starship init zsh)"
eval "$(rbenv init - --no-rehash zsh)"
source <(fzf --zsh)

if [[ $(uname) == "Darwin" ]]; then
    source /Users/jackhamilton/.config/broot/launcher/bash/br
elif command -v pacman > /dev/null; then
    #source /home/jack/.config/broot/launcher/bash/br
    export PATH="$PATH:/home/linuxbrew/.linuxbrew/bin"
fi
export PATH="$PATH:/home/jack/.local/bin"

if (( $+commands[bw] )); then
    credfile="$HOME/bitwarden.cred"
    while IFS=: read -r line
    do
        if [[ $line != "" ]]; then
            if [[ $line == *"user"* ]]; then
                export BW_CLIENTID=$line
            elif [[ $line == *"wegs"* ]]; then
                export BW_CLIENTSECRET=$line
            else
                BW_PASS=$line
            fi
        fi
        if [[ $line != "" ]]; then
        fi
    done <"$credfile"
    export BW_SESSION=$(bw unlock $BW_PASS --raw);
fi

RANDOMSEED=$(date +%s)
RANDOM=$(($RANDOMSEED/3600))
export THEMENUM=$((($RANDOM % 18) + 1))
case $THEMENUM in
    1)
        THEMESTR="oceanic_next"
        ;;
    2)
        THEMESTR="tokyo-night"
        ;;
    3)
        THEMESTR="iris"
        ;;
    4)
        THEMESTR="tokyo-night-storm"
        ;;
    5)
        THEMESTR="catppuccin_latte"
        ;;
    6)
        THEMESTR="catppuccin_frappe"
        ;;
    7)
        THEMESTR="catppuccin_macchiato"
        ;;
    8)
        THEMESTR="catppuccin_mocha"
        ;;
    9)
        THEMESTR="gruvbox"
        ;;
    10)
        THEMESTR="gruvbox_material"
        ;;
    11)
        THEMESTR="nightfox"
        ;;
    12)
        THEMESTR="rose-pine"
        ;;
    13)
        THEMESTR="catppuccin"
        ;;
    14)
        THEMESTR="everforest"
        ;;
    15)
        THEMESTR="kanagawa_wave"
        ;;
    16)
        THEMESTR="kanagawa_dragon"
        ;;
    17)
        THEMESTR="dracula"
        ;;
    18)
        THEMESTR="inferno"
        ;;
    19)
        THEMESTR="nordic"
        ;;
esac
rm "$HOME/.config/alacritty/themes/themes/current.toml"
ln -s "$HOME/.config/alacritty/themes/themes/$THEMESTR.toml" "$HOME/.config/alacritty/themes/themes/current.toml"
alacritty msg config -r -w -1
